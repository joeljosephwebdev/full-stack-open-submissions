(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),a=t(3),o=t(1),u=t(4),i=t.n(u),s="/api/persons",h=function(){return i.a.get(s).then((function(e){return e.data}))},l=function(e){return i.a.post(s,e).then((function(e){return e.data}))},d=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e}))},b=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},j=t(0),f=function(e){var n=e.person,t=e.handleDelete;return Object(j.jsxs)("p",{children:[n.name," ",n.number,Object(j.jsx)("button",{onClick:function(){return t(n.name,n.id)},children:"delete"})]},n.name)},m=function(e){var n=e.contactsToShow,t=e.handleDelete;return Object(j.jsx)("div",{children:n.map((function(e){return Object(j.jsx)(f,{person:e,handleDelete:t},e.name)}))})},O=function(e){var n=e.handleSubmit,t=e.newName,c=e.newNumber,r=e.handleNameChange,a=e.handleNumberChange;return Object(j.jsxs)("form",{onSubmit:n,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{onChange:r,value:t,placeholder:"enter a name",required:!0})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{onChange:a,value:c,placeholder:"enter a number",required:!0})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.handleSearch,t=e.searchString;return Object(j.jsxs)("div",{children:["search: ",Object(j.jsx)("input",{onChange:n,value:t,placeholder:"search by name"})]})},v=function(e){var n=e.message,t=e.type,c=e.handleReset;return null===n?null:Object(j.jsx)("div",{className:"notification ".concat(t),onClick:c,children:n})},x=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),u=Object(a.a)(r,2),i=u[0],s=u[1],f=Object(o.useState)(""),x=Object(a.a)(f,2),w=x[0],g=x[1],y=Object(o.useState)(""),S=Object(a.a)(y,2),C=S[0],N=S[1],k=Object(o.useState)(null),D=Object(a.a)(k,2),L=D[0],T=D[1],q=Object(o.useState)(""),A=Object(a.a)(q,2),E=A[0],J=A[1];Object(o.useEffect)((function(){h().then((function(e){c(e)}))}),[]);var R=function(){T(null),J("")},B=function(e){var n=e.content,t=e.type;T(n),J(t),setTimeout((function(){R()}),5e3)},I=C?t.filter((function(e){return e.name.toLowerCase().includes(C.toLocaleLowerCase())})):t;return Object(j.jsxs)("div",{children:[Object(j.jsx)(v,{message:L,type:E,handleReset:R}),Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(p,{searchString:C,handleSearch:function(e){N(e.target.value)}}),Object(j.jsx)("h3",{children:"Add a new contact"}),Object(j.jsx)(O,{newName:i,newNumber:w,handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){g(e.target.value)},handleSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.number===w})))return alert("".concat(w," is already in the phonebook"));var n={name:i,number:w};if(t.some((function(e){return e.name.toLowerCase()===i.toLowerCase()}))&&window.confirm("".concat(i," is already in the phonebook, replace the old number with the new one?"))){var r=t.find((function(e){return e.name===i})).id;b(r,n).then((function(e){c(t.map((function(t){return t.name!==n.name?t:e}))),s(""),g(""),B({content:"Changed ".concat(e.name,"'s number"),type:"success"})})).catch((function(e){B({content:"".concat(i," has already been removed from the server"),type:"error"}),c(t.filter((function(e){return e.id!==r}))),s(""),g("")}))}else l(n).then((function(e){c(t.concat(e)),s(""),g(""),B({content:"Added ".concat(e.name," to the phonebook"),type:"success"})}))}}),Object(j.jsx)("h3",{children:"Numbers"}),Object(j.jsx)(m,{contactsToShow:I,handleDelete:function(e,n){window.confirm("are you sure you want to delete ".concat(e))&&d(n).then((function(){c(t.filter((function(e){return e.id!==n})))})).catch((function(r){B({content:"".concat(e," has already been removed from the server"),type:"error"}),c(t.filter((function(e){return e.id!==n})))}))}})]})};t(38);r.a.render(Object(j.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.ad7ebf9f.chunk.js.map